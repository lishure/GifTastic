<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Artist Giphy</title>
    <style type="text/css">
        button,
        div,
        form,
        input {
            margin: 10px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Artist Search</h1>

        <!-- Movies will get dumped here -->
        <div id="buttons-view"></div>

        <form id="artists-form">
            <label for="artists-input">Add New Artist</label>
            <input type="text" id="artist-input"><br>

            <!-- Button triggers new movie to be added -->
            <input id="add-artist" type="submit" value="Submit">
        </form>
        <div id="gifs-appear-here"></div>

        <script type="text/javascript">
            // Initial array of movies
            var artists = ["Bruno Mars", "Taylor Swift", "Ed Sheeran", "Jason Derulo"];

            // Function for displaying movie data
            var renderButtons = () => {

                // Deleting the movie buttons prior to adding new movie buttons
                // (this is necessary otherwise we will have repeat buttons)
                document.querySelector("#buttons-view").innerHTML = "";

                // Looping through the array of movies
                for (let artist of artists) {

                    // Then dynamicaly generating buttons for each movie in the array.
                    var a = document.createElement("button");
                    // Adding a class
                    a.classList.add("artist");
                    // Adding a data-attribute with a value of the movie at index i
                    a.setAttribute("data-name", artist);
                    // Providing the button's text with a value of the movie at index i
                    a.innerText = artist;
                    // Adding the button to the HTML
                    document.querySelector("#buttons-view").appendChild(a);
                }

            }

            // This function handles events where one button is clicked
            document.querySelector("#add-artist").addEventListener("click", (event) => {
                // event.preventDefault() prevents the form from trying to submit itself.
                // We're using a form so that the user can hit enter instead of clicking the button if they want
                event.preventDefault();

                // This line will grab the text from the input box
                var artist = document.querySelector("#artist-input").value.trim();
                // The movie from the textbox is then added to our array
                artists.push(artist);

                // calling renderButtons which handles the processing of our movie array
                renderButtons();
            });

            // Calling the renderButtons function at least once to display the initial list of movies
            renderButtons();

            // function displayGifs() {
            //     var lady = $(this).attr("data-name");
            //     var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + lady + "&api_key=dc6zaTOxFJmzC&limit=8";

            //     $.ajax({
            //         url: queryURL,
            //         method: 'GET'
            //     })

                document.querySelector(".container").addEventListener("click", function (event) {

                    if (event.target.tagName === "button".toUpperCase()) {

                        // In this case, the "this" keyword refers to the button that was clicked
                        var person = event.target.innerText;
                        console.log(person)

                        // Constructing a URL to search Giphy for the name of the person who said the quote
                        var queryURL = `https://api.giphy.com/v1/gifs/search?q=${person}&api_key=m5A5ykcIh0d4oXBG4MK39GZTChMfxlj3&limit=10`;

                        // Performing our AJAX GET request
                        fetch(queryURL, {
                            method: "GET"
                        })
                            // After the data comes back from the API
                            .then(function (response) {
                                return response.json();
                            })
                            .then(function (response) {
                                // Storing an array of results in the results variable
                                var results = response.data;

                                // Looping over every result item
                                for (let item of results) {

                                    // Only taking action if the photo has an appropriate rating
                                    if (item.rating !== "r" && item.rating !== "pg-13") {
                                        // Creating a div for the gif
                                        var gifDiv = document.createElement("div");

                                        // Storing the result item's rating
                                        var rating = item.rating;

                                        // Creating a paragraph tag with the result item's rating
                                        var p = document.createElement("p")
                                        p.innerText = `Rating: ${rating}`;

                                        // Creating an image tag
                                        var personImage = document.createElement("img");

                                        // Giving the image tag an src attribute of a proprty pulled off the
                                        // result item
                                        personImage.setAttribute("src", item.images.fixed_height.url);

                                        // Appending the paragraph and personImage we created to the "gifDiv" div we created
                                        gifDiv.appendChild(p);
                                        gifDiv.appendChild(personImage);

                                        // Prepending the gifDiv to the "#gifs-appear-here" div in the HTML
                                        let gifsContainer = document.querySelector("#gifs-appear-here");
                                        gifsContainer.insertBefore(gifDiv, gifsContainer.firstChild);
                                    }
                                }
                            });
                    }
                });




    //create an array of disney characters

    //Create a loop to make the array into buttons
    //Create on click function for button

    //giphy api = m5A5ykcIh0d4oXBG4MK39GZTChMfxlj3
    //Grabs 10 non animated gifs and place on page
    //Each gif should display rating (PG, G, etc)

    //Add form that takes value and adds into array.
    //Make function that makes array into button



//Your app should take the topics in this array and create buttons in your HTML.

// Try using a loop that appends a button for each string in the array.

// When the user clicks on a button, the page should grab 10 static, non-animated gif images from the GIPHY API and place them on the page.

// When the user clicks one of the still GIPHY images, the gif should animate. If the user clicks the gif again, it should stop playing.

// Under every gif, display its rating (PG, G, so on).

// This data is provided by the GIPHY API.
// Only once you get images displaying with button presses should you move on to the next step.

// Add a form to your page takes the value from a user input box and adds it into your topics array. Then make a function call that takes each topic in the array remakes the buttons on the page.


        </script>
    </div>
</body>

</html>